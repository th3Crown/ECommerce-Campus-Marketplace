CREATE DATABASE marketplace_db;

USE marketplace_db;

CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Sample user for testing (username: demo, password: demo)
INSERT INTO users (username, email, password) VALUES ('demo', 'demo@example.com', 'demo');

-- Products table for marketplace
CREATE TABLE products (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    title VARCHAR(150) NOT NULL,
    description TEXT,
    price DECIMAL(10,2) NOT NULL DEFAULT 0.00,
    image_url VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- Sample products (run these after creating the DB)
-- Each product references the sample user created above (user_id = 1)
INSERT INTO products (user_id, title, description, price, image_url) VALUES
(1, 'Classic Runner', 'Comfortable running shoe', 79.00, 'images/products/shoe1.jpg'),
(1, 'Urban Sneaker', 'Stylish everyday sneaker', 99.00, 'images/products/shoe2.jpg'),
(1, 'Street Pro', 'Durable street shoe', 129.00, 'images/products/shoe3.jpg'),
(1, 'Light Runner', 'Lightweight running shoe', 69.00, 'images/products/shoe4.jpg');